---
- name: Install HoleSail globally using npm
  npm:
    name: holesail
    global: yes
  environment:
    PATH: "{{ ansible_env.PATH }}:{{ ansible_env.HOME }}/.asdf/bin:{{ ansible_env.HOME }}/.asdf/shims"

- name: Verify HoleSail installation
  command: holesail --version
  register: holesail_version
  changed_when: false  # This ensures Ansible does not treat this as a change
  environment:
    PATH: "{{ ansible_env.PATH }}:{{ ansible_env.HOME }}/.asdf/bin:{{ ansible_env.HOME }}/.asdf/shims"

- name: Print HoleSail version
  debug:
    msg: "HoleSail version is {{ holesail_version.stdout }}"
